{% extends 'base.html' %}
{% block content %}
<title>Subir imagenes</title>

<div class="container">
    <form action="{% url 'pikquick:crear_public' %}" method="POST" enctype="multipart/form-data" id="cargar">
        {% csrf_token %}
        <div class="card-panel red darken-3 row">
            <div class="input-field file-field col s2">
                <div class="card-panel red lighten-1 waves-effect waves-orange btn" style="position:relative">
                    <span>Imagen 1</span>
                    <input type='file' id='imgInp' name="img1"/>
                </div>
                <div class="card-panel red lighten-1 waves-effect waves-orange btn" style="position:relative">
                    <span>Imagen 2</span>
                    <input type='file' id='imgInp1' name='img2'/>
                </div>
            </div>
            <img id='blah' src="#" alt='your image' />
            <img id='blah1' src="#" alt='your image' />
            <div class="input-field col s8">
                <input placeholder="Comentario foto 1" maxlength="100" name="desc1" type="text" value="">
            </div>
            <div class="input-field col s8">
                <input placeholder="Comentario foto 2" maxlength="100" name="desc2" type="text" value="">
            </div>
            <div class="input-field col s8">
                <input placeholder="Pregunta de la publicacion" maxlength="100" name="descPub" type="text" value="">
            </div>
        </div>
        <a href="#" class="card-panel red lighten-1 waves-effect waves-orange btn col s2 offset-s10" id="crear">Subir Publicacion</a>
    </form>
</div>
{% endblock %}

{% block scripts %}
<script>

    $('#crear').click(function() {
        if($('input:file[name=img1]').val()=="" || $('input:file[name=img2]').val()==""){
            Materialize.toast('Debe cargar las imagenes', 2500)
        }else{
            $("#cargar").submit();
        }
    });

    function readURL(input) {

        if (input.files && input.files[0]) {
            var reader = new FileReader();

            reader.onload = function (e) {
                $('#blah').attr('src', e.target.result);
            }

            reader.readAsDataURL(input.files[0]);
        }
    }

    $('#imgInp').change(function(){
        readURL(this);
    });

    function readURL1(input) {

        if (input.files && input.files[0]) {
            var reader = new FileReader();

            reader.onload = function (e) {
                $('#blah1').attr('src', e.target.result);
            }

            reader.readAsDataURL(input.files[0]);
        }
    }

    $('#imgInp1').change(function(){
        readURL1(this);
    });

</script>
{% endblock %}
